<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SmileCare Dashboard</title>
  <link rel="stylesheet" href="Staff-1.css">
  <link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css"/>
</head>
<body>

<!-- Sidebar -->
<div class="sidebar">
  <div class="logo_content">
    <div class="logo">
      <img src="SmileCareLogo Dashboard.png" alt="SmileCare Logo">
      <div class="logo_name">SmileCare</div>
    </div>
    <i class="ri-menu-line" id="btn"></i>
  </div>

  <ul class="nav_list">
    <li><a href="#" onclick="showSection('dashboard')"><i class="ri-dashboard-line"></i><span class="links_name">Dashboard</span></a></li>
    <li><a href="#" onclick="showSection('patient')"><i class="ri-user-line"></i><span class="links_name">Patient</span></a></li>
    <li><a href="#" onclick="showSection('appointment_table')"><i class="ri-calendar-2-line"></i><span class="links_name">Appointment</span></a></li>
    <li class="logout"><a href="Home.html"><i class="ri-logout-box-line"></i><span class="links_name">Logout</span></a></li>
  </ul>
</div>

<!-- Main Content -->
<div class="home_content">

  <!-- Dashboard Section -->
  <div id="dashboard" class="content_section">
    <div class="text-container">
      <div class="home_text">
        <div class="text-1">Welcome Username!</div>
        <div class="text-2">Providing exceptional care and making smiles brighter every day</div>
      </div>
    </div>
  </div>

<!-- Patient Section -->
<div id="patient" class="table content_section" style="display:none;">
  <!-- Patient Table -->
  <main class="table" id="patient_table">
    
    <!-- Patient Table Header -->
    <section class="table__header">
      <h1>Patient Details</h1>
    </section>
    
    <!-- Patient Table Body -->
    <section class="table__body">
      <table>
        <thead>
          <!-- Patient Table Heading -->
          <tr>
            <th> ID </th>
            <th> Patient Name </th>
            <th> Date of Birth </th>
            <th> Gender </th>
          </tr>
        </thead>
        <tbody id="patient-table-body">
          <!-- Booking Rows will be inserted here by JavaScript -->
        </tbody>
      </table>
    </section>

  </main>
</div>

<!-- Appointment Section -->
<main id="appointment_table" class="table content_section" style="display:none;">
  
  <!-- Appointment Table Header -->
  <section class="table__header">
    <h1>Appointment</h1>
  </section>
  
  <!-- Appointment Table Body -->
  <section class="table__body">
    <table>
      <thead>
        <!-- Appointment Table Heading -->
        <tr>
          <th> ID </th>
          <th> Patient </th>
          <th> Day & Time </th>
          <th> Treatment </th>
        </tr>
      </thead>
      <tbody>
        <!-- Appointment Rows -->
        <tr>
          <td>001</td>
          <td>John Smith</td>
          <td>2023-08-15 10:00</td>
          <td>Cleaning</td>
        </tr>
        <tr>
          <td>002</td>
          <td>Emily Johnson</td>
          <td>2023-08-16 14:00</td>
          <td>Whitening</td>
        </tr>
      </tbody>
    </table>
  </section>

</main>


<!-- JavaScript -->
<script>
  const btn = document.querySelector("#btn");
  const sidebar = document.querySelector(".sidebar");

  // Toggle sidebar visibility
  btn.onclick = function () {
    sidebar.classList.toggle("active");
  };


// Fetch and display bookings in the patient table
async function loadBookings() {
  try {
    const response = await fetch('/bookings', { credentials: 'include' });
    const bookings = await response.json();
    const tbody = document.getElementById('patient-table-body');
    tbody.innerHTML = '';
    bookings.forEach(booking => {
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${booking.id}</td>
        <td>${booking.name}</td>
        <td>${booking.dateOfBirth}</td>
        <td>${booking.gender}</td>
        <td>${booking.dateTime}</td>
        <td>${booking.treatment}</td>
      `;
      tbody.appendChild(tr);
    });
  } catch (err) {
    alert('Failed to load bookings.');
  }
}
// Load bookings when the patient section is shown
function showSection(sectionId) {
  document.querySelectorAll('.content_section').forEach(sec => sec.style.display = 'none');
  document.getElementById(sectionId).style.display = '';
  if (sectionId === 'patient') loadBookings();
}
// Optionally, load dashboard by default
showSection('dashboard');
</script>

</body>
</html>
